<?xml version="1.0" encoding="UTF-8" standalone="no"?>
	<project basedir="." default="build" name="StudentTester">
	<property environment="env"/>
	<property name="debuglevel" value="source,lines,vars"/>
	<property name="target" value="1.8"/>
	<property name="source" value="1.8"/>
	<property name="major-version-number" value="1" />
	<exec executable="hostname" outputproperty="computer.hostname"/>
	<path id="StudentTester.classpath">
		<pathelement location="bin"/>
		<pathelement location="lib/testng-6.10.1.jar"/>
		<pathelement location="lib/junit-4.12.jar"/>
		<pathelement location="lib/hamcrest-core-1.3.jar"/>
		<pathelement location="lib/checkstyle-6.18-all.jar"/>
		<pathelement location="lib/javax.json-1.0.jar"/>
		<pathelement location="lib/jcommander.jar"/>
	</path>
		<tstamp prefix="build-info">
		<format property="current-date" pattern="d-MMMM-yyyy" locale="en" />
		<format property="current-time" pattern="hh:mm:ss a z" locale="en" />
		<format property="year-month-day" pattern="yyyy-MM-dd" locale="en" />
	</tstamp>
	
	<target name="build-jar" depends="build-project" description="Builds StudentTester jar.">
		<buildnumber />
		<property name="version-number" value="${major-version-number}.${build.number}" />
		<jar destfile="build/${ant.project.name}-${version-number}.jar" basedir="bin/">
			<zipgroupfileset dir="lib" includes="*.jar"/>
			<manifest>
				<attribute name="Main-Class" value="studenttester.classes.StudentTesterMain"/>
				<attribute name="Built-By" value="${computer.hostname}" />
				<attribute name="Built-On" value="${build-info.current-date}" />
				<attribute name="Built-At" value="${build-info.current-time}" />
				<attribute name="Implementation-Version" value="${version-number}" />
			</manifest>
	   </jar>
	</target>
	
	<target depends="init" name="build-project">
		<echo message="${ant.project.name}: ${ant.file}"/>
		<javac encoding="UTF-8" debug="true" debuglevel="${debuglevel}" destdir="bin" includeantruntime="false" source="${source}" target="${target}">
			<src path="src"/>
			<classpath refid="StudentTester.classpath"/>
		</javac>
	</target>
	
	<target name="init">
		<mkdir dir="bin"/>
		<copy includeemptydirs="false" todir="bin">
			<fileset dir="src">
				<exclude name="**/*.java"/>
			</fileset>
		</copy>
	</target>
	
	<target name="clean">
		<delete dir="bin"/>
	</target>
</project>
